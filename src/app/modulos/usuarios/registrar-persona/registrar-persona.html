<div class="container">
  <div class="header">
    <h2>Crear Nueva Persona</h2>
    <div class="button-group">
      <button (click)="volverAlLogin()" class="btn btn-secondary">
        ‚Üê Volver al Login
      </button>
      <button (click)="irAResidentes()" class="btn btn-info">
        Ir a Residentes ‚Üí
      </button>
    </div>
  </div>

  <!-- Mensajes de estado -->
  <div *ngIf="mensaje" [class]="esError ? 'mensaje error' : 'mensaje'">
    {{ mensaje }}
  </div>

  <!-- Informaci√≥n del token -->
  <div *ngIf="!token" class="token-alert">
    <p>‚ö†Ô∏è No se encontr√≥ token de autenticaci√≥n. Debes iniciar sesi√≥n primero.</p>
  </div>

  <!-- Formulario de creaci√≥n -->
  <div class="form-container" *ngIf="token">
    <app-form
      [fields]="fields"
      [formGroup]="personaForm"
      [disableSubmit]="personaForm.invalid || cargando"
      (submitForm)="onSubmit($event)">
    </app-form>

    <!-- Informaci√≥n de debug -->
    <div class="debug-info" *ngIf="personaForm.value.numeroDocumento">
      <h4>üìä Debug Info:</h4>
      <p><strong>Token:</strong> {{ token ? 'Presente' : 'Faltante' }}</p>
      <p><strong>Formulario v√°lido:</strong> {{ personaForm.valid }}</p>
      <p><strong>Campos llenos:</strong> {{ contarCamposLlenos() }}/{{ fields.length }}</p>
      <p><strong>Fecha nacimiento:</strong> {{ personaForm.value.fechaNacimiento }}</p>
      <details>
        <summary>Ver datos del formulario</summary>
        <pre>{{ personaForm.value | json }}</pre>
      </details>
    </div>
  </div>
</div>