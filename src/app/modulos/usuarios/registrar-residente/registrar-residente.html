<div class="container">
  <div class="header">
    <h2>Registrar Nuevo Residente</h2>
    <div class="button-group">
      <button (click)="volverALogin()" class="btn btn-secondary">
        â† Volver al Login
      </button>
      <button (click)="irAListaResidentes()" class="btn btn-info">
        Ver Residentes â†’
      </button>
      <button (click)="irACrearPersona()" class="btn btn-success">
        ï¼‹ Crear Persona
      </button>
    </div>
  </div>

  <!-- Mensajes de estado -->
  <div *ngIf="mensaje" [class]="esError ? 'mensaje error' : 'mensaje'">
    {{ mensaje }}
  </div>

  <!-- InformaciÃ³n del token -->
  <div *ngIf="!token" class="token-alert">
    <p>âš ï¸ No se encontrÃ³ token de autenticaciÃ³n. Debes iniciar sesiÃ³n primero.</p>
  </div>

  <!-- Formulario de creaciÃ³n -->
  <div class="form-container" *ngIf="token">
    <div class="form-info">
      <h4>ğŸ“‹ InformaciÃ³n del Residente</h4>
      <p>Complete la informaciÃ³n para registrar a una persona como residente en un apartamento.</p>
    </div>

    <app-form
      [fields]="fields"
      [formGroup]="residenteForm"
      [disableSubmit]="residenteForm.invalid || cargando"
      (submitForm)="onSubmit($event)">
    </app-form>

    <!-- InformaciÃ³n de debug -->
    <div class="debug-info" *ngIf="residenteForm.value.personaId">
      <h4>ğŸ“Š Debug Info:</h4>
      <p><strong>Token:</strong> {{ token ? 'Presente' : 'Faltante' }}</p>
      <p><strong>Formulario vÃ¡lido:</strong> {{ residenteForm.valid }}</p>
      <p><strong>Campos llenos:</strong> {{ contarCamposLlenos() }}/{{ fields.length }}</p>
      <p><strong>Personas cargadas:</strong> {{ opciones.personas.length }}</p>
      <details>
        <summary>Ver datos del formulario</summary>
        <pre>{{ residenteForm.value | json }}</pre>
      </details>
    </div>
  </div>
</div>